<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>about-oracle</title>
    <url>/2021/01/19/about-oracle/</url>
    <content><![CDATA[<h2 id="oracle-相关"><a href="#oracle-相关" class="headerlink" title="oracle 相关"></a>oracle 相关</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">sqlplus sys&#x2F;123456 as sysdba</span><br><span class="line"></span><br><span class="line">--删除用户</span><br><span class="line"></span><br><span class="line">drop user custUser cascade;</span><br><span class="line"></span><br><span class="line">--创建用户</span><br><span class="line"></span><br><span class="line">create user custUser identified by custUser DEFAULT TABLESPACE custtbl;</span><br><span class="line"></span><br><span class="line">--授权</span><br><span class="line"></span><br><span class="line">grant connect, resource to custUser;</span><br><span class="line"></span><br><span class="line">--授权</span><br><span class="line"></span><br><span class="line">create or replace directory MYDIR as &#39;C:\data&#39;;</span><br><span class="line"></span><br><span class="line">SELECT * FROM dba_directories;</span><br><span class="line"></span><br><span class="line">grant read,write on directory MYDIR to custUser;</span><br><span class="line"></span><br><span class="line">--解密</span><br><span class="line"></span><br><span class="line">grant execute on sys.dbms_crypto to custUser;</span><br><span class="line"></span><br><span class="line">grant sysdba to custUser;</span><br><span class="line"></span><br><span class="line">imp system&#x2F;root full&#x3D;y file&#x3D;D:\oracle\custUser_20191120.dmp</span><br><span class="line"></span><br><span class="line">imp system&#x2F;root tablespaces&#x3D;custtbl fromuser&#x3D;custUser touser&#x3D;custUser file&#x3D;C:\oracle\custUser.dmp</span><br><span class="line"></span><br><span class="line">create tablespace custtbl datafile &#39;D:\DATA\tbl\ssmtbl.dbf&#39; size 10240m autoextend on next 1024m maxsize 20480m extent management local;</span><br><span class="line"></span><br><span class="line">ALTER TABLESPACE kokuyotbl2 ADD DATAFILE &#39;D:\oracle\kokuyotbl2_2.dbf&#39; SIZE 10240m autoextend on next 1024m maxsize 10240m  extent management local;</span><br><span class="line"></span><br><span class="line">drop tablespace kokuyotbl2 including contents and datafiles cascade constraint;</span><br><span class="line"></span><br><span class="line">JAVA_OPTS&#x3D;&quot;-Xms3024m -Xmx7048m -XX:PermSize&#x3D;256M -XX:MaxNewSize&#x3D;256m -XX:MaxPermSize&#x3D;256m&quot;</span><br><span class="line"></span><br><span class="line">imp system&#x2F;123456 tablespaces&#x3D;kokuyotbl2 fromuser&#x3D;custUser touser&#x3D;custUser file&#x3D;D:\oracle\custUser.dmp</span><br><span class="line"></span><br><span class="line">imp system&#x2F;123456 tablespaces&#x3D;kokuyotbl2 fromuser&#x3D;custUser touser&#x3D;custUser file&#x3D;D:\oracle\custUser.dmp</span><br><span class="line"></span><br><span class="line">impdp system&#x2F;cnet DIRECTORY&#x3D;MYDIR DUMPFILE&#x3D;expdp.dmp SCHEMAS&#x3D;test_demo</span><br><span class="line"></span><br><span class="line">ssptbl</span><br><span class="line"></span><br><span class="line">impdp system&#x2F;cnet directory&#x3D;MYDIR dumpfile&#x3D;workflowdt0921.dmp table_exists_action&#x3D;replace</span><br><span class="line"></span><br><span class="line">impdp ssm_pro&#x2F;ssm_pro@orcl dumpfile&#x3D;MYDIR:SSM_PRO.DMP logfile&#x3D;MYDIR:1.log schemas&#x3D;ssm_pro REMAP_SCHEMA&#x3D;ssm_pro remap_tablespace&#x3D;ssm_pro remap_tablespace&#x3D;ssm_pro</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ANALYZE TABLE BC_UKEBARAI_CHECK ESTIMATE STATISTICS;</span><br><span class="line"></span><br><span class="line">--sql 查询慢 分析</span><br><span class="line">set autotrace on statistics</span><br><span class="line"></span><br><span class="line">explain plan for select 1 from dual;</span><br><span class="line"></span><br><span class="line">select * from table(dbms_xplan.display);</span><br><span class="line"></span><br><span class="line">--数据分析</span><br><span class="line">begin</span><br><span class="line">  for c_row in (select table_name from USER_TABLES)</span><br><span class="line">    loop</span><br><span class="line">      execute immediate &#39;ANALYZE TABLE &#39; || c_row.TABLE_NAME || &#39; ESTIMATE STATISTICS&#39;;</span><br><span class="line">    end loop;</span><br><span class="line">  commit ;</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">--环境变量字符集</span><br><span class="line">export NLS_LANG&#x3D;japanese_japan.JA16SJIS</span><br><span class="line"></span><br><span class="line">expdp tklc&#x2F;tklc@db01 dumpfile&#x3D;MYDIR:tklc_20200929.dmp logfile&#x3D;MYDIR:1.log schemas&#x3D;tklc</span><br><span class="line"></span><br><span class="line">expdp custUser&#x2F;custUser@db01 dumpfile&#x3D;MYDIR:kokuyo_20201221.dmp logfile&#x3D;MYDIR:1.log schemas&#x3D;custUser</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">错误ORA-00600 : alter system set &quot;_optimizer_cost_based_transformation&quot;&#x3D;off</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--kill session 表被锁住</span><br><span class="line">select b.owner, b.object_name, a.session_id, a.locked_mode</span><br><span class="line">from v$locked_object a,</span><br><span class="line">     dba_objects b</span><br><span class="line">where b.object_id &#x3D; a.object_id;</span><br><span class="line"></span><br><span class="line">SELECT sid, serial#, username osuser FROM v$session;</span><br><span class="line"></span><br><span class="line">alter system kill session&#39;58,55749&#39;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>oracle</category>
      </categories>
      <tags>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>about-zpl</title>
    <url>/2021/01/19/about-zpl/</url>
    <content><![CDATA[<h2 id="ZPL-相关"><a href="#ZPL-相关" class="headerlink" title="ZPL 相关"></a>ZPL 相关</h2><h4 id="设置打印语言"><a href="#设置打印语言" class="headerlink" title="设置打印语言"></a>设置打印语言</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">! U1 setvar &quot;device.languages&quot; &quot;zpl&quot; \n</span><br></pre></td></tr></table></figure>
<h4 id="ASCII-打印中文-使用字符集-CI26-包含-ASCII-Transparency-a-和-c-的多字节亚洲编码"><a href="#ASCII-打印中文-使用字符集-CI26-包含-ASCII-Transparency-a-和-c-的多字节亚洲编码" class="headerlink" title="ASCII 打印中文 使用字符集 CI26 ( 包含 ASCII Transparency a 和 c 的多字节亚洲编码)"></a>ASCII 打印中文 使用字符集 CI26 ( 包含 ASCII Transparency a 和 c 的多字节亚洲编码)</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">^XA</span><br><span class="line">^FO10,10^AJ,24,24^CI26^FD你好世界，Hello World^FS</span><br><span class="line">^XZ</span><br></pre></td></tr></table></figure>
<h4 id="UTF8-打印中文-使用字符集-CI28-Unicode-（UTF-8-编码）-Unicode-字符集"><a href="#UTF8-打印中文-使用字符集-CI28-Unicode-（UTF-8-编码）-Unicode-字符集" class="headerlink" title="UTF8 打印中文 使用字符集 CI28 (Unicode （UTF-8 编码） - Unicode 字符集)"></a>UTF8 打印中文 使用字符集 CI28 (Unicode （UTF-8 编码） - Unicode 字符集)</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">^XA</span><br><span class="line">^FO10,10^AJ,24,24^CI28^FD你好世界，Hello World^FS</span><br><span class="line">^XZ</span><br></pre></td></tr></table></figure>
<h4 id="sswind-zebra"><a href="#sswind-zebra" class="headerlink" title="sswind zebra"></a>sswind zebra</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;append ds&#x3D;&quot;printData.value&quot; value&#x3D;&quot;^XA</span><br><span class="line">^FO10,10^AJ,24,24^CI28^FD你好世界，ASDFGHJKLQW^FS</span><br><span class="line">^XZ&quot;&#x2F;&gt;</span><br><span class="line">&lt;sswindPrint2 addr&#x3D;&quot;192.168.1.124&quot; port&#x3D;&quot;9100&quot; maker&#x3D;&quot;ZEBRA&quot; protocol&#x3D;&quot;zebra&quot; event&#x3D;&quot;sh10_01_test&quot; print-ds&#x3D;&quot;printData.value&quot; encode&#x3D;&quot;utf-8&quot;&#x2F;&gt;</span><br><span class="line">&lt;append ds&#x3D;&quot;00.edit1&quot; value&#x3D;&quot;&quot;&#x2F;&gt;</span><br><span class="line">&lt;fcopy value&#x3D;&quot;sswindPrint2.Result&quot; ds-dest&#x3D;&quot;00.edit1&quot; &#x2F;&gt;</span><br><span class="line">        </span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>zpl</category>
      </categories>
      <tags>
        <tag>zpl</tag>
      </tags>
  </entry>
  <entry>
    <title>about-xperia</title>
    <url>/2021/06/11/about-xperia/</url>
    <content><![CDATA[<h1 id="Sony-Xperia"><a href="#Sony-Xperia" class="headerlink" title="Sony Xperia"></a>Sony Xperia</h1>]]></content>
      <categories>
        <category>xperia</category>
      </categories>
      <tags>
        <tag>xperia</tag>
      </tags>
  </entry>
  <entry>
    <title>mybatis使用typeHandle解决timestamp序列化问题</title>
    <url>/2021/01/19/mybatis%E4%BD%BF%E7%94%A8typeHandle%E8%A7%A3%E5%86%B3timestamp%E5%BA%8F%E5%88%97%E5%8C%96%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>Clob同理</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> oracle.sql.DATE;</span><br><span class="line"><span class="keyword">import</span> oracle.sql.TIMESTAMP;</span><br><span class="line"><span class="keyword">import</span> oracle.sql.TIMESTAMPLTZ;</span><br><span class="line"><span class="keyword">import</span> oracle.sql.TIMESTAMPTZ;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.type.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@MappedTypes(&#123;Object.class&#125;)</span></span><br><span class="line"><span class="meta">@MappedJdbcTypes(value = &#123;JdbcType.TIMESTAMP,&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeStampTypeHandle</span> <span class="keyword">extends</span> <span class="title">BaseTypeHandler</span>&lt;<span class="title">Object</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimeStampTypeHandle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNonNullParameter</span><span class="params">(PreparedStatement ps, <span class="keyword">int</span> i, Object parameter, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        ps.setObject(i, parameter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getNullableResult</span><span class="params">(ResultSet rs, String columnName)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Object result = rs.getObject(columnName);</span><br><span class="line">        <span class="keyword">return</span> rs.wasNull() ? <span class="keyword">null</span> : dealResult(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getNullableResult</span><span class="params">(ResultSet rs, <span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Object result = rs.getObject(columnIndex);</span><br><span class="line">        <span class="keyword">return</span> rs.wasNull() ? <span class="keyword">null</span> : dealResult(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getNullableResult</span><span class="params">(CallableStatement cs, <span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Object result = cs.getObject(columnIndex);</span><br><span class="line">        <span class="keyword">return</span> cs.wasNull() ? <span class="keyword">null</span> : dealResult(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 为了解决错误timestamp 序列化失败</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> result</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Object <span class="title">dealResult</span><span class="params">(Object result)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (result <span class="keyword">instanceof</span> TIMESTAMP) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Date(((TIMESTAMP) result).dateValue().getTime());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result <span class="keyword">instanceof</span> DATE) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Date(((DATE) result).dateValue().getTime());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result <span class="keyword">instanceof</span> TIMESTAMPLTZ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Date(((TIMESTAMPLTZ) result).dateValue().getTime());</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result <span class="keyword">instanceof</span> TIMESTAMPTZ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Date(((TIMESTAMPTZ) result).dateValue().getTime());</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (result <span class="keyword">instanceof</span> Timestamp) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Date(((Timestamp) result).getTime());</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>mybais</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
</search>
